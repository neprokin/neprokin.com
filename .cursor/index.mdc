# Project Rules для neprokin.com

## Общие принципы
- Следуй принципам SOLID и чистой архитектуры
- Создавай маленькие, тестируемые функции
- Разделяй бизнес-логику и представление
- Всегда добавляй типизацию TypeScript
- Используй современные практики веб-разработки 2025

## Архитектура проекта
- **Astro 5.x** для статической генерации и Islands Architecture
- **Obsidian** как headless CMS с Markdown файлами
- **Распределенная CSS архитектура**: Critical CSS (Layout.astro) + Global Styles (globals.css) + Tailwind
- **TypeScript** для всего кода
- **Vite** как bundler и dev server

## CSS Архитектура
- **Critical CSS** в Layout.astro - мгновенная загрузка
- **Global Styles** в globals.css - система дизайна и компоненты
- **Tailwind Config** - utility framework с CSS переменными
- **Spacing система** - модульная сетка 4px через CSS переменные
- **Mobile-First** responsive дизайн с логическими свойствами

## Стиль кода
- Именуй компоненты в PascalCase (Button, Header, BlogPost)
- Используй camelCase для переменных и функций
- Добавляй TypeScript типы для всех props, функций и API
- Используй интерфейсы для сложных типов данных
- Следуй принципам DRY, KISS, YAGNI

## Структура файлов
```
src/
├── components/           # UI компоненты
│   ├── ui/              # Базовые UI элементы (Button, Input)
│   ├── layout/          # Лейауты (Header, Footer, Navigation)
│   └── content/         # Контент компоненты (BlogPost, ProjectCard)
├── styles/              # Стили и UI-kit
│   ├── globals.css      # Система дизайна и компонентные стили
│   └── ui-kit-demo.css  # Preview стили (не для продакшена)
├── pages/               # Astro страницы
├── layouts/             # Базовые лейауты
├── utils/               # Утилиты и хелперы
└── types/               # TypeScript типы
```

## Obsidian интеграция
- Контент хранится в папке `content/` как Markdown файлы
- Используй YAML frontmatter для метаданных
- Поддерживай Obsidian ссылки `[[]]` через remark-wiki-link
- Обрабатывай изображения и медиа из Obsidian vault
- Создавай типизированные коллекции для разных типов контента

## UI-Kit принципы
- Используй CSS Custom Properties для темизации
- Создавай атомарные компоненты (Atomic Design)
- Поддерживай темную/светлую тему
- Обеспечивай полную адаптивность (mobile-first)
- Используй семантические HTML теги

## Производительность
- Минимизируй JavaScript bundle (Islands Architecture)
- Оптимизируй изображения автоматически
- Используй статическую генерацию где возможно
- Добавляй lazy loading для контента
- Стремись к Lighthouse Score 100/100

## Безопасность
- Валидируй все входные данные
- Не храни секреты в коде
- Используй Content Security Policy
- Логируй ошибки, но не секреты
- Используй HTTPS для всех внешних запросов

## Тестирование
- Создавай unit тесты для утилит и функций
- Тестируй компоненты с помощью Vitest
- Проверяй accessibility с помощью axe
- Тестируй производительность регулярно

## Git и развертывание
- Используй Conventional Commits
- Создавай осмысленные commit сообщения
- Используй feature branches для новых функций
- Автоматический деплой на Vercel/Netlify
- Настрой pre-commit hooks для линтинга

## Markdown обработка
- Используй unified.js экосистему (remark/rehype)
- Добавляй подсветку синтаксиса кода
- Поддерживай математические формулы
- Генерируй table of contents автоматически
- Оптимизируй чтение времени и SEO метаданные